<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DBD Score Overlay</title>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="overlay">
    <div class="header">Realm of the Pink Ribbon Tourney</div>
    <div class="middle-row">
      <div class="middle-item" id="roundLabel">Round 1</div>
      <div class="middle-item" id="teamAName">Team 1</div>
      <div class="middle-item score" id="scoreA">0</div>
      <div class="middle-item" id="teamBName">Team 2</div>
      <div class="middle-item score" id="scoreB">0</div>
    </div>
    <div class="bottom-row" id="matchLabel">Match 1</div>
  </div>

<script src="config.js"></script>
<script>
const teamANameEl = document.getElementById('teamAName');
const teamBNameEl = document.getElementById('teamBName');
const scoreAEl = document.getElementById('scoreA');
const scoreBEl = document.getElementById('scoreB');
const matchEl = document.getElementById('matchLabel');
const roundEl = document.getElementById('roundLabel');

async function fetchFromServer(){
    try{
        const res = await fetch("/current-score");
        const data = await res.json();
        roundEl.textContent = data.roundNum ? "Round " + data.roundNum : "Round";
        teamANameEl.textContent = data.teamANum ? "Team " + data.teamANum : "Team A";
        teamBNameEl.textContent = data.teamBNum ? "Team " + data.teamBNum : "Team B";
        scoreAEl.textContent = data.teamAPts || "0";
        scoreBEl.textContent = data.teamBPts || "0";
        matchEl.textContent = data.matchNum ? "Match " + data.matchNum : "Match";
    } catch(err){
        console.error("Error fetching server JSON:", err);
    }
}

fetchFromServer();
setInterval(fetchFromServer, FETCH_INTERVAL_MS);
</script>
</body>
</html>